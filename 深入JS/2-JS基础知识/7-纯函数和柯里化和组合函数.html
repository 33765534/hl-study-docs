<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>纯函数 | 学习文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="学习使用 js">
    
    <link rel="preload" href="/hl-study-docs/assets/css/0.styles.fca0694a.css" as="style"><link rel="preload" href="/hl-study-docs/assets/js/app.a7a0deb5.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/2.ed2108dc.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/1.50f09b5a.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/29.14652181.js" as="script"><link rel="prefetch" href="/hl-study-docs/assets/js/10.7a8fbf8e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/11.bb7db750.js"><link rel="prefetch" href="/hl-study-docs/assets/js/12.972143b3.js"><link rel="prefetch" href="/hl-study-docs/assets/js/13.c0b20c18.js"><link rel="prefetch" href="/hl-study-docs/assets/js/14.94caa370.js"><link rel="prefetch" href="/hl-study-docs/assets/js/15.41e99379.js"><link rel="prefetch" href="/hl-study-docs/assets/js/16.3d4d0357.js"><link rel="prefetch" href="/hl-study-docs/assets/js/17.3622e246.js"><link rel="prefetch" href="/hl-study-docs/assets/js/18.5d6399c1.js"><link rel="prefetch" href="/hl-study-docs/assets/js/19.a85acb05.js"><link rel="prefetch" href="/hl-study-docs/assets/js/20.38807455.js"><link rel="prefetch" href="/hl-study-docs/assets/js/21.5bf9cc97.js"><link rel="prefetch" href="/hl-study-docs/assets/js/22.1ee5dd9f.js"><link rel="prefetch" href="/hl-study-docs/assets/js/23.8180e310.js"><link rel="prefetch" href="/hl-study-docs/assets/js/24.163b747e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/25.31d34bef.js"><link rel="prefetch" href="/hl-study-docs/assets/js/26.1b816ef0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/27.2ab754e9.js"><link rel="prefetch" href="/hl-study-docs/assets/js/28.3c356d13.js"><link rel="prefetch" href="/hl-study-docs/assets/js/3.6201525e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/30.d61d9ea0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/4.260b3024.js"><link rel="prefetch" href="/hl-study-docs/assets/js/5.2e65d9d7.js"><link rel="prefetch" href="/hl-study-docs/assets/js/6.bcd173c0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/7.026b5af2.js"><link rel="prefetch" href="/hl-study-docs/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/hl-study-docs/assets/css/0.styles.fca0694a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hl-study-docs/" class="home-link router-link-active"><!----> <span class="site-name">学习文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hl-study-docs/%E6%B7%B1%E5%85%A5JS/2-JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/深入JS.html" class="nav-link">
  初识 js
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hl-study-docs/%E6%B7%B1%E5%85%A5JS/2-JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/深入JS.html" class="nav-link">
  初识 js
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>深入JS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JS基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hl-study-docs/深入JS/2-JS基础知识/3-高阶函数和闭包的定义.html" class="sidebar-link">高阶函数和闭包的定义</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/4-函数的this指向.html" class="sidebar-link">函数的this指向</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/5-箭头函数.html" class="sidebar-link">箭头函数</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/6-手写call和apply和bind和arguments.html" class="sidebar-link">手写call和apply和bind和arguments</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html" class="active sidebar-link">纯函数和柯里化和组合函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html#纯函数" class="sidebar-link">纯函数</a></li><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html#副作用" class="sidebar-link">副作用</a></li><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html#纯函数的好处" class="sidebar-link">纯函数的好处</a></li><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html#柯里化函数的特点" class="sidebar-link">柯里化函数的特点</a></li><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html#组合函数" class="sidebar-link">组合函数</a></li></ul></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/8-严格模式和属性描述符操作.html" class="sidebar-link">严格模式和属性描述符操作</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="纯函数"><a href="#纯函数" class="header-anchor">#</a> 纯函数</h2> <p>维基百科上对纯函数的定义是：</p> <ol><li>相同的输入始终要得到相同的输出。</li> <li>函数的输出和输入值以外的其他隐藏信息或状态无关，也和由I/O设备产生的外部输出无关。</li> <li>该函数不能有语义上可观察的副作用，诸如“触发事件”，使输出设备改变，或影响除该函数以外的其他程序或数据结构。</li></ol> <p>确定的输入，一定会产生确定的输出；函数在执行过程中，不能产生副作用；</p> <p>数组的方法中是纯函数:</p> <ol><li>map</li> <li>filter</li> <li>reduce</li> <li>slice</li> <li>every</li></ol> <h2 id="副作用"><a href="#副作用" class="header-anchor">#</a> 副作用</h2> <p>在程序中，副作用（side effect）通常被定义为“一个函数对于调用者而言产生的除返回值之外的任何可观察的副作用”。</p> <p>数组的方法中是非纯函数:</p> <ol><li>push</li> <li>pop</li> <li>unshift</li> <li>shift</li> <li>splice</li> <li>sort</li> <li>reverse</li> <li>concat</li> <li>join</li></ol> <h2 id="纯函数的好处"><a href="#纯函数的好处" class="header-anchor">#</a> 纯函数的好处</h2> <ol><li>易于测试</li> <li>易于并行处理</li> <li>易于优化</li> <li>易于调试</li> <li>易于理解</li></ol> <h2 id="柯里化函数的特点"><a href="#柯里化函数的特点" class="header-anchor">#</a> 柯里化函数的特点</h2> <p>柯里化（Currying）是把接受多个参数的函数变换成接受一个单一参数(最初函数的第一个参数)的函数，并且返回接受余下的参数且返回结果的新函数的技术。</p> <p>只传递给函数一部分参数来调用它，让它返回一个函数去处理剩余的参数。这个过程就是 柯里化。</p> <ol><li>参数复用</li> <li>业务解耦，调用时机灵活</li> <li>延迟执行，部分求值</li></ol> <p>示例：</p> <div class="language- extra-class"><pre class="language-text"><code>function sum(num1,num2,num3,num4) {
    console.log(num1,num2,num3,num4);
}

var newSum = sum.bind(&quot;aaa&quot;,10);
newSum(20,30,40);
</code></pre></div><p>柯里化函数以及简化的柯里化代码：</p> <div class="language- extra-class"><pre class="language-text"><code>function sum1(x) {
    return function(y) {
        return function(z) {
            return x + y + z;
        }
    }
}
var newSum1 = sum1(10)(20)(30);

// 简化柯里化代码
var sum2 = x =&gt; y =&gt; z =&gt; x + y + z;
var newSum2 = sum2(10)(20)(30);
</code></pre></div><h3 id="让函数的职责单一"><a href="#让函数的职责单一" class="header-anchor">#</a> 让函数的职责单一</h3> <p>为什么需要有柯里化的存在？</p> <ol><li>参数复用，逻辑的复用</li> <li>在函数式编程中，我们其实往往希望一个函数处理的问题尽可能的单一，而不是将一大堆的处理过程交给一个函数来处理。</li> <li>单一职责原则：一个函数只负责一件事，这样这个函数才能更被其他函数信任，更可能实现高内聚低耦合。</li> <li>那么我们是否就可以将每次传入的参数在单一的函数中进行处理，处理完后在下一个函数中再使用处理后的结果。</li></ol> <h3 id="手写转柯里化函数"><a href="#手写转柯里化函数" class="header-anchor">#</a> 手写转柯里化函数</h3> <div class="language- extra-class"><pre class="language-text"><code>function myCurrying(fn) {
    return function(...args) {
        // 判断当前已经接收的参数的个数，可以参数本身需要接收的参数是否已经一致了
        // 1.当已经传入的参数 大于等于 需要的参数个数的时候，就可以开始执行函数了
        if(args.length &gt;= fn.length) {
            return fn.apply(this,args);
        }else {
            // 2.如果没有达到个数，需要返回一个新的函数，继续来接收参数
            return function(...args2) {
                // 把已经接收到的参数和最新的参数合并传递给原函数
                return curried.apply(this,args.concat(args2));
            }
        }
    }
}

</code></pre></div><h2 id="组合函数"><a href="#组合函数" class="header-anchor">#</a> 组合函数</h2> <p>组合(compose) 函数是在 JavaScript 开发过程中一种对函数使用技巧、模式</p> <h3 id="组合函数的定义"><a href="#组合函数的定义" class="header-anchor">#</a> 组合函数的定义</h3> <p>组合函数(compose function) 指的是将多个函数组合(chain) 起来，组合后的函数会从右到左依次执行，上一次的执行结果，会作为参数传入给下一次的执行中。</p> <h3 id="组合函数的实现"><a href="#组合函数的实现" class="header-anchor">#</a> 组合函数的实现</h3> <div class="language- extra-class"><pre class="language-text"><code>function compose(...args) {
    return function(value) {
        return args.reverse().reduce((acc,fn) =&gt; fn(acc),value);
    }
}

function pow(x,n) {
    return Math.pow(x,n);
}

function pow2(x) {
    return function(n) {
        return Math.pow(x,n);
    }
}
// 实现一个函数，可以实现对于一个数值的任意次方计算
const result = compose(pow2(2),pow2(3));
console.log(result(4));
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hl-study-docs/深入JS/2-JS基础知识/6-手写call和apply和bind和arguments.html" class="prev">
        手写call和apply和bind和arguments
      </a></span> <span class="next"><a href="/hl-study-docs/深入JS/2-JS基础知识/8-严格模式和属性描述符操作.html">
        严格模式和属性描述符操作
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hl-study-docs/assets/js/app.a7a0deb5.js" defer></script><script src="/hl-study-docs/assets/js/2.ed2108dc.js" defer></script><script src="/hl-study-docs/assets/js/1.50f09b5a.js" defer></script><script src="/hl-study-docs/assets/js/29.14652181.js" defer></script>
  </body>
</html>
