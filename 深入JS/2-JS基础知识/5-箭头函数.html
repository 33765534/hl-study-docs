<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>箭头函数 arrow function | 学习文档</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="学习使用 js">
    
    <link rel="preload" href="/hl-study-docs/assets/css/0.styles.fca0694a.css" as="style"><link rel="preload" href="/hl-study-docs/assets/js/app.a7a0deb5.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/2.ed2108dc.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/1.50f09b5a.js" as="script"><link rel="preload" href="/hl-study-docs/assets/js/27.2ab754e9.js" as="script"><link rel="prefetch" href="/hl-study-docs/assets/js/10.7a8fbf8e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/11.bb7db750.js"><link rel="prefetch" href="/hl-study-docs/assets/js/12.972143b3.js"><link rel="prefetch" href="/hl-study-docs/assets/js/13.c0b20c18.js"><link rel="prefetch" href="/hl-study-docs/assets/js/14.94caa370.js"><link rel="prefetch" href="/hl-study-docs/assets/js/15.41e99379.js"><link rel="prefetch" href="/hl-study-docs/assets/js/16.3d4d0357.js"><link rel="prefetch" href="/hl-study-docs/assets/js/17.3622e246.js"><link rel="prefetch" href="/hl-study-docs/assets/js/18.5d6399c1.js"><link rel="prefetch" href="/hl-study-docs/assets/js/19.a85acb05.js"><link rel="prefetch" href="/hl-study-docs/assets/js/20.38807455.js"><link rel="prefetch" href="/hl-study-docs/assets/js/21.5bf9cc97.js"><link rel="prefetch" href="/hl-study-docs/assets/js/22.1ee5dd9f.js"><link rel="prefetch" href="/hl-study-docs/assets/js/23.8180e310.js"><link rel="prefetch" href="/hl-study-docs/assets/js/24.163b747e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/25.31d34bef.js"><link rel="prefetch" href="/hl-study-docs/assets/js/26.1b816ef0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/28.3c356d13.js"><link rel="prefetch" href="/hl-study-docs/assets/js/29.14652181.js"><link rel="prefetch" href="/hl-study-docs/assets/js/3.6201525e.js"><link rel="prefetch" href="/hl-study-docs/assets/js/30.d61d9ea0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/4.260b3024.js"><link rel="prefetch" href="/hl-study-docs/assets/js/5.2e65d9d7.js"><link rel="prefetch" href="/hl-study-docs/assets/js/6.bcd173c0.js"><link rel="prefetch" href="/hl-study-docs/assets/js/7.026b5af2.js"><link rel="prefetch" href="/hl-study-docs/assets/js/vendors~docsearch.77260563.js">
    <link rel="stylesheet" href="/hl-study-docs/assets/css/0.styles.fca0694a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/hl-study-docs/" class="home-link router-link-active"><!----> <span class="site-name">学习文档</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/hl-study-docs/%E6%B7%B1%E5%85%A5JS/2-JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/深入JS.html" class="nav-link">
  初识 js
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/hl-study-docs/%E6%B7%B1%E5%85%A5JS/2-JS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/深入JS.html" class="nav-link">
  初识 js
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>深入JS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JS基础知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/hl-study-docs/深入JS/2-JS基础知识/3-高阶函数和闭包的定义.html" class="sidebar-link">高阶函数和闭包的定义</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/4-函数的this指向.html" class="sidebar-link">函数的this指向</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/5-箭头函数.html" class="active sidebar-link">箭头函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/hl-study-docs/深入JS/2-JS基础知识/5-箭头函数.html#箭头函数-arrow-function" class="sidebar-link">箭头函数 arrow function</a></li></ul></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/6-手写call和apply和bind和arguments.html" class="sidebar-link">手写call和apply和bind和arguments</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/7-纯函数和柯里化和组合函数.html" class="sidebar-link">纯函数和柯里化和组合函数</a></li><li><a href="/hl-study-docs/深入JS/2-JS基础知识/8-严格模式和属性描述符操作.html" class="sidebar-link">严格模式和属性描述符操作</a></li></ul></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="箭头函数-arrow-function"><a href="#箭头函数-arrow-function" class="header-anchor">#</a> 箭头函数 arrow function</h2> <h3 id="箭头函数的语法"><a href="#箭头函数的语法" class="header-anchor">#</a> 箭头函数的语法</h3> <div class="language- extra-class"><pre class="language-text"><code>(参数1,参数2,...) =&gt; { 函数声明 }
(参数1,参数2,...) =&gt; 表达式
//当只有一个参数时，圆括号是可选的：
(单一参数) =&gt; { 函数声明 }
单一参数 =&gt; {函数声明 }
//没有参数的函数应该写成一对圆括号。
() =&gt; { 函数声明 }

// 如果函数执行体只有一行代码，那么{}可以省略，并且他会默认将这行代码执行结果作为返回值
nums.forEach(item =&gt; item%2===0)
    .map(item =&gt; item*100)
    .reduce((preValue,item) =&gt; preValue + item)
// 只有一个代码且是对象的时候需要加上小括号
let bar = ()=&gt;({name:'xxx',age:18})
</code></pre></div><h3 id="箭头函数的注意点"><a href="#箭头函数的注意点" class="header-anchor">#</a> 箭头函数的注意点</h3> <ol><li>箭头函数没有自己的this，它里面的this是继承外面的this</li> <li>箭头函数没有arguments，取而代之用rest参数...解决</li> <li>箭头函数没有原型属性</li> <li>箭头函数不能用作Generator函数，不能使用yeild关键字</li> <li>箭头函数不能使用new命令，因为：
<ol><li>没有自己的this，无法调用call，apply</li> <li>没有自己的原型对象</li> <li>不能用作构造函数</li></ol></li> <li>箭头函数的this指向是固定的，但是它的指向在定义的时候是确定不了的，它的指向是在运行的时候才能确定，它里面的this的指向，是看他外面的第一个普通函数的this指向谁，然后箭头函数的this就是指向这个普通函数的this。</li></ol> <h3 id="箭头函数的this-指向"><a href="#箭头函数的this-指向" class="header-anchor">#</a> 箭头函数的this 指向</h3> <p>箭头函数没有自己的this，它里面的this是继承外面的this</p> <p>箭头函数的this指向是固定的，但是它的指向在定义的时候是确定不了的，它的指向是在运行的时候才能确定，它里面的this的指向，是看他外面的第一个普通函数的this指向谁，然后箭头函数的this就是指向这个普通函数的this。</p> <div class="language- extra-class"><pre class="language-text"><code>var obj1={
  name:'obj1',
  foo:function(){
    console.log(this);
  },
  bar:()=&gt;{
    console.log(this);
  }
}
var obj2={
  name:'obj2'
}

obj1.bar(); // obj1
obj2.bar(); // obj1
</code></pre></div><h3 id="模拟网络请求的案例"><a href="#模拟网络请求的案例" class="header-anchor">#</a> 模拟网络请求的案例</h3> <ul><li>使用 setTimeout 来模拟网络请求，请求到数据后如何可以放到data 中呢？</li> <li>我们需要拿到 obj 对象，设置data</li> <li>但是直接拿到的this 是window ，我们需要在外层定义：var _this = this</li> <li>在setTimeout 的回调函数中使用 _this 就代表了 obj 对象</li></ul> <div class="language- extra-class"><pre class="language-text"><code>var obj={
  data:[],
  getData:function(){
    var _this = this;
    setTimeout(function(){
      // 模拟获取到的数据
      var res=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;];
      _this.data.push(...res);
    },1000);
  }
}
</code></pre></div><p>上面的例子中我们使用的ES5来实现的，是通过_this 变量来赋值的，接下来我们使用ES6的箭头函数来实现。</p> <ul><li>为什么在setTimeout 的回调函数中可以直接使用this尼？</li> <li>因为箭头函数并不绑定 this 对象，那么this引用就会从上层作用域中找到对应的this</li></ul> <div class="language- extra-class"><pre class="language-text"><code>var obj={
  data:[],
  getData:function(){
    setTimeout(()=&gt;{
      // 模拟获取到的数据
      var res=[&quot;a&quot;,&quot;b&quot;,&quot;c&quot;];
      this.data.push(...res);
    },1000);
  }
}
</code></pre></div><p>如果getData也是一个箭头函数，那么setTimeout中的回调函数中的this 指向谁尼？
答案：window</p> <div class="language- extra-class"><pre class="language-text"><code>var obj={
  data:[],
  getData:()=&gt;{
    setTimeout(()=&gt;{
      console.log(this)
    },1000);
  }
}
</code></pre></div><h3 id="练习题"><a href="#练习题" class="header-anchor">#</a> 练习题</h3> <p>第一题：</p> <div class="language- extra-class"><pre class="language-text"><code>var name=&quot;window&quot;;
var person={
  name:&quot;person&quot;,
  sayName:function(){
    console.log(this.name);
  }
}
function sayName(){
  var ss=person.sayName;
  ss();// window
  person.sayName();// person
  (person.sayName)();// person
  (b = person.sayName)();// window
}
sayName();
</code></pre></div><p>第二题：</p> <div class="language- extra-class"><pre class="language-text"><code>var name='window';
var person1={
  name:'person1',
  foo1:function(){
    console.log(this.name)
  },
  foo2:()=&gt;console.log(this.name),
  foo3:function(){
    return function(){
      console.log(this.name)
    }
  },
  foo4:function(){
    return ()=&gt;{
      console.log(this.name)
    }
  }
}

var person2={name:'person2'}

person1.foo1();// person1
person1.foo1.call(person2); // person2

person1.foo2();// window
person1.foo2.call(person2); // window

person1.foo3()();// window
person1.foo3.call(person2)(); // window
person1.foo3().call(person2);// person2

person1.foo4()();// person1
person1.foo4.call(person2)(); // person2
person1.foo4().call(person2);// person1

</code></pre></div><p>第三题：</p> <div class="language- extra-class"><pre class="language-text"><code>var name='window'
function Person(name){
  this.name=name;
  this.foo1=function (){
    console.log(this.name)
  }
  this.foo2=()=&gt;console.log(this.name)
  this.foo3=function(){
    return function(){
      console.log(this.name)
    }
  }
  this.foo4=function(){
    return ()=&gt;{
      console.log(this.name)
    }
  }
}

var person1=new Person('person1');
var person2=new Person('person2');

person1.foo1();//person1
person1.foo1().call(person2)//person2

person1.foo2();//person1
person1.foo2().call(person2)//person1

person1.foo3()();// window
person1.foo3.call(person2)(); // window
person1.foo3().call(person2);// person2

person1.foo4()();// person1
person1.foo4.call(person2)(); // person2
person1.foo4().call(person2);// person1
</code></pre></div><p>第四题：</p> <div class="language- extra-class"><pre class="language-text"><code>var name='window'
function Person(name){
  this.name=name
  this.obj={
    foo1:function(){
      return function(){
        console.log(this.name)
      }
    },
    foo2:function(){
      return ()=&gt;{
        console.log(this.name)
      }
    }
  }
}

var person1=new Person('person1');
var person2=new Person('person2');

person1.obj.foo1()();// window
person1.obj.foo1.call(person2)(); // window
person1.obj.foo1().call(person2);// person2

person1.obj.foo2()();// obj
person1.obj.foo2.call(person2)(); // person2
person1.obj.foo3().call(person2);// obj
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/hl-study-docs/深入JS/2-JS基础知识/4-函数的this指向.html" class="prev">
        函数的this指向
      </a></span> <span class="next"><a href="/hl-study-docs/深入JS/2-JS基础知识/6-手写call和apply和bind和arguments.html">
        手写call和apply和bind和arguments
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/hl-study-docs/assets/js/app.a7a0deb5.js" defer></script><script src="/hl-study-docs/assets/js/2.ed2108dc.js" defer></script><script src="/hl-study-docs/assets/js/1.50f09b5a.js" defer></script><script src="/hl-study-docs/assets/js/27.2ab754e9.js" defer></script>
  </body>
</html>
